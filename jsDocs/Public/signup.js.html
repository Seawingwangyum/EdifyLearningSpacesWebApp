<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: signup.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: signup.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var response = {};

var fname = document.getElementById("fname");
var lname = document.getElementById("lname")
var email = document.getElementById("email");
var educationbg = document.getElementById("background");
var password = document.getElementById("password");
var passwordcheck = document.getElementById("passwordcheck");
var address = document.getElementById("address")
var speechbubbble = document.getElementById("bubble");

var instructions = document.getElementById("instructions");

document.getElementById("backbtn").addEventListener("click", function(){
    document.getElementById("tccontainer").style.display = "none";
    document.getElementById("signupcontainer").style.display = "block";
})

document.getElementById("finishsignup").addEventListener("click", function(){
    console.log(document.getElementById("checkbox").checked)
    if (document.getElementById("checkbox").checked == true){
        send_prep();
    }
    else {
        document.getElementById("ninjadiv").innerHTML = "Please check the box to continue";
        document.getElementById("ninjadiv").style.color = "red";
    }
})

document.getElementById('signup').addEventListener("click",function(){
    verify_email(verification());
})

document.addEventListener("click", function(event) {
    if(event.target == password){
        speechbubbble.style.display="block";
    }
    else {
        speechbubbble.style.display = "none";
    }
})

/**
 * Alerts the user if any boxes have benn left empty
 */
function verification(){
    var pass_msg = check_characters(password.value);

    if(fname.value == "" || lname.value==""){
        instructions.innerHTML="Please fill out your name"
        instructions.style.color = "red"
        return false
    }
    else if(emailValidation(email.value) == false){
        instructions.innerHTML="Please enter a valid Email Address"
        instructions.style.color = "red"
        return false
    }
    else if(educationbg.value == ""){
        instructions.innerHTML="Please fill out your education"
        instructions.style.color = "red"
        return false;
    }
    else if(password.value == ""){
        instructions.innerHTML="Please enter a valid password"
        instructions.style.color = "red"
        return false;
    }
    else if(password_length(password.value) == false){
        instructions.innerHTML="Password is under 8 characters"
        instructions.style.color = "red"
        return false;
    }
    else if(pass_msg != "0"){
        if(pass_msg == "1"){
            instructions.innerHTML="Password contains no uppercase letters"
            instructions.style.color = "red"
            return false;
        }
        else if(pass_msg == "2"){
            instructions.innerHTML="Password does not contain any numbers"
            instructions.style.color = "red"
            return false;
        }
    }
    else if(password.value != passwordcheck.value){
        instructions.innerHTML="Passwords do not match"
        instructions.style.color = "red"
        return false;
    }
    else if(address.value == ""){
        instructions.innerHTML="Please fill out your address"
        instructions.style.color = "red"
        return false;
    }
    
    else{
        return true;
    }

};

function verify_email(validation_check){
    if(validation_check == true){
        var email_check = {};
        email_check["type"] = "check_email";
        email_check["email"] = email.value;
        ajax_function(email_check)
        .then((data)=>{
            console.log(data["used_email"])
            if(data["used_email"] != 0){
                instructions.innerHTML="This Email address has already been registered"
                instructions.style.color = "red"
            }
            else {
                document.getElementById("tccontainer").style.display = "block";
                document.getElementById("signupcontainer").style.display = "none";
            }
        })
    }

}

/**
 * finds the length of the password
 * @param {string} pw - The password the user inputed.
 * @return {boolean} - If the password is long enough.
 */
function password_length(pw){
    if(password.value.length &lt; 8){
        return false;
    }
    else {
        return true;
    }
};


/**
 * checks if the password has the required characters
 * @param {*} pw - The password the user has inputed
 * @return {boolean} - If the password is missing any requirements
 */
function check_characters(pw){
    var num = false;
    var cap = false;
    for (i=0; i&lt;pw.length; i++){
        if(isNaN(pw[i]) == false){
            num = true;
        }
        else if(pw[i] == pw[i].toUpperCase()) {
            cap = true;
        }
    }
    if(cap == true &amp;&amp; num == true){
        return "0";
    }
    else if(cap != true){
        return "1";
    }
    else if(num != true){
        return "2";
    }
}




/**
 * prepares data and sends the prepaired data to server to server.
 */
function send_prep(){
    response["fname"] = fname.value;
    response["lname"] = lname.value;
    response["email"] = email.value; 
    response["edubg"] = educationbg.value; 
    response["password"] = password.value; 
    response["address"] = address.value; 
    ajax_function(response)
    .then((returned)=>{
        // console.log(data)
        if(returned.Error == "0"){
            swal({
                type: 'success',
                title: 'Your account has been created',
                text: 'You will be redirected to the home page',
                confirmButtonText: 'Ok'
            }).then((result)=>{
                location.href="/landing_page"
            })
        }
        else{
            swal("Whoops, Something went wrong", "Please reload your page", "error")
        }
    })
}
//verifies email
function emailValidation(emails) {
    if ((/^[^@]+@[a-z]+\.[a-z]{2,4}$/).test(emails)) {
        return true
    } else {
        return false
    }
}

/**
 * Sends prepaired data to server then redirects user back to landing page.
 * @param {*} json_obj - The data that gets send to the node server.
 */
function ajax_function(json_obj){
    return new Promise((resolve)=>{
    $.ajax({
        type: 'POST',
        data: JSON.stringify(json_obj),
        contentType: 'application/json',
        url: '/account_creation',
        success: function(data){
            resolve(data)
        }
    })
})
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ajax_function">ajax_function</a></li><li><a href="global.html#changeEmail">changeEmail</a></li><li><a href="global.html#changeName">changeName</a></li><li><a href="global.html#changePassword">changePassword</a></li><li><a href="global.html#check_characters">check_characters</a></li><li><a href="global.html#checkForBlankEntry">checkForBlankEntry</a></li><li><a href="global.html#checkForEmailFormat">checkForEmailFormat</a></li><li><a href="global.html#checkForOnlyAlphabet">checkForOnlyAlphabet</a></li><li><a href="global.html#checkForPasswordFormat">checkForPasswordFormat</a></li><li><a href="global.html#confirm">confirm</a></li><li><a href="global.html#createNewElement">createNewElement</a></li><li><a href="global.html#CreateNewInput">CreateNewInput</a></li><li><a href="global.html#createOptions">createOptions</a></li><li><a href="global.html#crimOC">crimOC</a></li><li><a href="global.html#crimOCSS">crimOCSS</a></li><li><a href="global.html#deleteAdmin">deleteAdmin</a></li><li><a href="global.html#downloadS3">downloadS3</a></li><li><a href="global.html#empOC">empOC</a></li><li><a href="global.html#fireOC">fireOC</a></li><li><a href="global.html#floorOC">floorOC</a></li><li><a href="global.html#floorOCSS">floorOCSS</a></li><li><a href="global.html#getInputs">getInputs</a></li><li><a href="global.html#immunOC">immunOC</a></li><li><a href="global.html#loggedIn">loggedIn</a></li><li><a href="global.html#notification">notification</a></li><li><a href="global.html#password_length">password_length</a></li><li><a href="global.html#refOC">refOC</a></li><li><a href="global.html#request_status">request_status</a></li><li><a href="global.html#send_prep">send_prep</a></li><li><a href="global.html#siteOC">siteOC</a></li><li><a href="global.html#siteOCSS">siteOCSS</a></li><li><a href="global.html#uploadS3">uploadS3</a></li><li><a href="global.html#verification">verification</a></li><li><a href="global.html#verify">verify</a></li><li><a href="global.html#verify_forms_entered">verify_forms_entered</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Dec 06 2018 20:08:30 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
