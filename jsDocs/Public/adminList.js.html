<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: adminList.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: adminList.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Checks if all input fields have been filled
 * @param {String} email -User input for email
 * @param {String} fname -User input for first name
 * @param {String} lname -User input for last name
 * @param {String} password -User input for password
 */
function verify_forms_entered(email, fname, lname, password) {
	if (email === '' || fname === '' || lname === '' || password === '') {
		swal(
			'Failed',
			'Please fill out all entrys',
			'error'
		);
		return false
	} else {
		return true
	}
}

/**
* Checks password strength (>= 8 length, 1 lower and upper case, 1 number).
* @param {string} password - The users entered password.
* @return {boolean} True if it passes the strength test.
*/
function checkForPasswordFormat(password) {
	if ((/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/).test(password)) {
		return true
	} else {
		swal(
			'Failed',
			'Password must contain a upper-case and lower-case character, a number, and be 8 long',
			'error'
		);
		return false
	}
}

/**
* Checks that the string is in a valid email format.
* @param {string} email - The users entered email.
* @return {boolean} True if it passes the email format test.
*/
function checkForEmailFormat(email) {
    if ((/^[^@]+@[a-z]+\.[a-z]{2,4}$/).test(email)) {
        return true
    } else {
    	swal(
			'Failed',
			'Incorrect email format',
			'error'
		);
        return false
    }
}

/**
* Checks that there are only alphabetical characters.
* @param {array} entry - Array of user entered strings.
* @return {boolean} True if it only contains alphabetical characters.
*/
function checkForOnlyAlphabet(entry) {
	for (i = 0; i &lt; entry.length; i++) {
		if (!/^[a-zA-Z]+$/.test(entry[i])) {
			swal(
				'Failed',
				'First and last name must be alphabetical',
				'error'
			);
			return false
		}
	}
	return true
}

/**
 * Opens a sweetalert and allows the user to create an admin account
 */
function getInputs() {
	swal({
		title: 'Create Admin',
		html:
		'Create a new admin account&lt;/h2>'+
		'&lt;input id="swal-input1" class="swal2-input" autofocus placeholder="Email">' +
		'&lt;input id="swal-input2" class="swal2-input" autofocus placeholder="First name">' +
		'&lt;input id="swal-input3" class="swal2-input" autofocus placeholder="Last name">' +
		'&lt;input id="swal-input4" class="swal2-input" type="password" placeholder="Password">',
		 preConfirm: function() {
		   return new Promise(function(resolve) {
			   if (true) {
			    resolve([
					document.getElementById('swal-input1').value,
					document.getElementById('swal-input2').value,
					document.getElementById('swal-input3').value,
					document.getElementById('swal-input4').value,
			    ]);
			   }
			});
		}
	}).then(function(result) {
		if (verify_forms_entered(result.value[0], result.value[1], result.value[2], result.value[3])
			&amp;&amp; checkForOnlyAlphabet([result.value[1], result.value[2]])
			&amp;&amp; checkForEmailFormat(result.value[0])
			&amp;&amp; checkForPasswordFormat(result.value[3])
			) {
			return result
		}
	}).then(function(result) {
		if (result) {
			var xhr = new XMLHttpRequest();
			xhr.open('POST', '/create_admin');
	        xhr.setRequestHeader('Content-Type', 'application/json');
	        xhr.onload = function() {
	        	if (xhr.status === 200) {
	        		// show without refreshing
					// document.getElementById('userName').innerHTML=name;
					swal (
						'Success!',
						'Admin account created',
						'success'
					);
	        	} else {
	        		swal('Unable to create account')
	        	}
	        };
	        xhr.send(JSON.stringify({
	        	'email': result.value[0],
	        	'fname': result.value[1],
	        	'lname': result.value[2],
	        	'password': result.value[3],
	     	}))
	    }
	})
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ajax_function">ajax_function</a></li><li><a href="global.html#changeEmail">changeEmail</a></li><li><a href="global.html#changeName">changeName</a></li><li><a href="global.html#changePassword">changePassword</a></li><li><a href="global.html#check_characters">check_characters</a></li><li><a href="global.html#checkForBlankEntry">checkForBlankEntry</a></li><li><a href="global.html#checkForEmailFormat">checkForEmailFormat</a></li><li><a href="global.html#checkForOnlyAlphabet">checkForOnlyAlphabet</a></li><li><a href="global.html#checkForPasswordFormat">checkForPasswordFormat</a></li><li><a href="global.html#confirm">confirm</a></li><li><a href="global.html#createNewElement">createNewElement</a></li><li><a href="global.html#CreateNewInput">CreateNewInput</a></li><li><a href="global.html#createOptions">createOptions</a></li><li><a href="global.html#crimOC">crimOC</a></li><li><a href="global.html#crimOCSS">crimOCSS</a></li><li><a href="global.html#deleteAdmin">deleteAdmin</a></li><li><a href="global.html#downloadS3">downloadS3</a></li><li><a href="global.html#empOC">empOC</a></li><li><a href="global.html#fireOC">fireOC</a></li><li><a href="global.html#floorOC">floorOC</a></li><li><a href="global.html#floorOCSS">floorOCSS</a></li><li><a href="global.html#getInputs">getInputs</a></li><li><a href="global.html#immunOC">immunOC</a></li><li><a href="global.html#loggedIn">loggedIn</a></li><li><a href="global.html#notification">notification</a></li><li><a href="global.html#password_length">password_length</a></li><li><a href="global.html#refOC">refOC</a></li><li><a href="global.html#request_status">request_status</a></li><li><a href="global.html#send_prep">send_prep</a></li><li><a href="global.html#siteOC">siteOC</a></li><li><a href="global.html#siteOCSS">siteOCSS</a></li><li><a href="global.html#uploadS3">uploadS3</a></li><li><a href="global.html#verification">verification</a></li><li><a href="global.html#verify">verify</a></li><li><a href="global.html#verify_forms_entered">verify_forms_entered</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Dec 06 2018 20:08:30 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
